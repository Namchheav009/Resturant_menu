@model MenuItem
@{
    ViewData["Title"] = "Edit Menu Item";
}
<link rel="stylesheet" href="~/css/dashboard/editmenu.css" asp-append-version="true" />

<div class="edit-wrapper">
    <!-- Header -->
    <div class="edit-header">
        <div class="header-container">
            <a href="@Url.Action("MenuItems", "AdminDashboard")" class="back-link">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M12 4L6 10L12 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span>Back to Menu Items</span>
            </a>
            <div class="header-content">
                <h1 class="edit-title">Edit Menu Item</h1>
                <p class="edit-subtitle">Update the details of your menu item</p>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="edit-container">
        <div class="edit-layout">
            <!-- Edit Form -->
            <div class="form-section">
                <div class="form-card">
                    <div class="form-header">
                        <div class="form-icon">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path d="M4 24L8 20L12 24L16 20L20 24L24 20L28 24M4 8H28M8 8V24M24 8V24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div>
                            <h2 class="form-title">Menu Item Details</h2>
                            <p class="form-description">Modify the information below</p>
                        </div>
                    </div>

                    <form method="post" class="edit-form" enctype="multipart/form-data">
                        <input type="hidden" name="Id" value="@Model.Id" />

                        <div class="form-group">
                            <label class="form-label" for="Name">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M2 4H14M2 8H14M2 12H10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                Item Name
                            </label>
                            <input 
                                id="Name"
                                name="Name" 
                                type="text"
                                class="form-input" 
                                value="@Model.Name"
                                placeholder="Enter item name" 
                                required />
                            <span class="form-hint">The name displayed on the menu</span>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="Description">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <rect x="2" y="2" width="12" height="12" rx="2" stroke="currentColor" stroke-width="2"/>
                                    <path d="M5 6H11M5 9H9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                Description
                            </label>
                            <textarea 
                                id="Description"
                                name="Description" 
                                class="form-textarea" 
                                rows="4"
                                placeholder="Describe your menu item">@Model.Description</textarea>
                            <span class="form-hint">Detailed description of the dish</span>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="Price">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="2"/>
                                        <path d="M8 5V11M6 7H10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                    Price
                                </label>
                                <input 
                                    id="Price"
                                    name="Price" 
                                    type="number" 
                                    step="0.01"
                                    class="form-input" 
                                    value="@Model.Price"
                                    placeholder="0.00" 
                                    required />
                                <span class="form-hint">Price in USD</span>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="CategoryId">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <rect x="2" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="2"/>
                                        <rect x="9" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="2"/>
                                        <rect x="2" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="2"/>
                                        <rect x="9" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="2"/>
                                    </svg>
                                    Category
                                </label>
                                <select id="CategoryId" name="CategoryId" class="form-select" required>
                                    <option value="">Select Category</option>
                                    @{
                                        var categories = ViewBag.Categories as List<Category>;
                                        if (categories != null)
                                        {
                                            foreach (var cat in categories)
                                            {
                                                <option value="@cat.Id" selected="@(Model.CategoryId == cat.Id ? "selected" : null)">@cat.Name</option>
                                            }
                                        }
                                    }
                                </select>
                                <span class="form-hint">Menu category</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="ImageUrl">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <rect x="2" y="3" width="12" height="10" rx="2" stroke="currentColor" stroke-width="2"/>
                                    <circle cx="6" cy="7" r="1.5" fill="currentColor"/>
                                    <path d="M14 10L11 7L8 10L6 8L2 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Image URL
                            </label>
                            <input 
                                id="ImageUrl"
                                name="ImageUrl" 
                                type="text"
                                class="form-input" 
                                value="@Model.ImageUrl"
                                placeholder="https://example.com/image.jpg" />
                            <span class="form-hint">URL of the dish image (or upload below)</span>

                            <div style="margin-top:10px;">
                                <label class="form-label" for="ImageFile">Upload Image</label>
                                <input id="ImageFile" name="ImageFile" type="file" accept="image/*" class="form-input" />
                                <input type="hidden" name="ExistingImageUrl" value="@Model.ImageUrl" />
                                <small class="form-hint">Choose an image file to upload. Upload will replace the existing image.</small>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="checkbox-wrapper">
                                <input 
                                    type="hidden" 
                                    id="IsAvailableHidden"
                                    name="IsAvailable" 
                                    value="@(Model.IsAvailable ? "true" : "false")" />
                                <input 
                                    type="checkbox" 
                                    id="IsAvailable"
                                    class="form-checkbox" 
                                    @(Model.IsAvailable ? "checked" : "")
                                    onchange="document.getElementById('IsAvailableHidden').value = this.checked ? 'true' : 'false';" />
                                <label for="IsAvailable" class="checkbox-label">
                                    <span class="checkbox-box">
                                        <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                                            <path d="M2 6L5 9L10 3" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </span>
                                    <span class="checkbox-text">
                                        <strong>Item is Available</strong>
                                        <small>Customers can order this item</small>
                                    </span>
                                </label>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn-submit">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M16 4L7 13L3 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <span>Update Menu Item</span>
                            </button>
                            <a href="@Url.Action("MenuItems", "AdminDashboard")" class="btn-cancel">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M15 5L5 15M5 5L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                <span>Cancel</span>
                            </a>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Preview Card -->
            <div class="preview-section">
                <div class="preview-card">
                    <div class="preview-header">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                            <path d="M9 3V7M15 3V7M3 10H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <circle cx="8" cy="14" r="1" fill="currentColor"/>
                            <circle cx="12" cy="14" r="1" fill="currentColor"/>
                            <circle cx="16" cy="14" r="1" fill="currentColor"/>
                        </svg>
                        <h2 class="preview-title">Item Preview</h2>
                    </div>

                    @if (!string.IsNullOrEmpty(Model.ImageUrl))
                    {
                        <div class="preview-image">
                            <img src="@Model.ImageUrl" alt="@Model.Name" />
                        </div>
                    }
                    else
                    {
                        <div class="preview-image-placeholder">
                            <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                                <rect x="10" y="15" width="60" height="50" rx="4" stroke="currentColor" stroke-width="3"/>
                                <circle cx="28" cy="32" r="6" fill="currentColor"/>
                                <path d="M70 52L55 37L40 52L28 40L10 58" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <p>No image</p>
                        </div>
                    }

                    <div class="preview-content">
                        <h3 class="preview-item-name">@Model.Name</h3>
                        @if (!string.IsNullOrEmpty(Model.Description))
                        {
                            <p class="preview-description">@Model.Description</p>
                        }
                        <div class="preview-price">${Model.Price.ToString("F2")}</div>
                        <div class="preview-status">
                            @if (Model.IsAvailable)
                            {
                                <span class="status-badge status-available">
                                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                                        <circle cx="6" cy="6" r="5" fill="currentColor"/>
                                    </svg>
                                    Available
                                </span>
                            }
                            else
                            {
                                <span class="status-badge status-unavailable">
                                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                                        <circle cx="6" cy="6" r="5" fill="currentColor"/>
                                    </svg>
                                    Unavailable
                                </span>
                            }
                        </div>
                    </div>
                </div>

                <!-- Quick Tips -->
                <div class="tips-card">
                    <div class="tips-header">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="10" r="9" stroke="currentColor" stroke-width="2"/>
                            <path d="M10 6V10M10 13H10.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <h3>Quick Tips</h3>
                    </div>
                    <ul class="tips-list">
                        <li>Use high-quality images for better presentation</li>
                        <li>Write clear, appetizing descriptions</li>
                        <li>Set competitive pricing</li>
                        <li>Uncheck "Available" to temporarily hide items</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
