@model List<Booking>
@{
    ViewData["Title"] = "Archived Bookings";
}

<link rel="stylesheet" href="~/css/dashboard/menuitem.css" asp-append-version="true" />

<div class="manage-wrapper">
    <div class="manage-container">
        <!-- Header -->
        <div class="manage-header">
            <div class="header-content">
                <div class="header-text">
                    <a href="@Url.Action("Index", "AdminBookings")" class="back-link">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M12 4L6 10L12 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <span>Back to Active Bookings</span>
                    </a>
                    <h1 class="page-title">Archived Bookings</h1>
                    <p class="page-subtitle">View deleted and archived reservations</p>
                </div>
            </div>
        </div>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-icon">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M3 6H17M8 10V14M12 10V14M3 6L4 16C4 16.5304 4.21071 17.0391 4.58579 17.4142C4.96086 17.7893 5.46957 18 6 18H14C14.5304 18 15.0391 17.7893 15.4142 17.4142C15.7893 17.0391 16 16.5304 16 16L17 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-value">@Model.Count</span>
                    <span class="stat-label">Archived Bookings</span>
                </div>
            </div>
        </div>

        <!-- Archived Bookings Table -->
        @if (Model.Any())
        {
            <div style="overflow-x: auto; background: white; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
                    <thead>
                        <tr style="background: linear-gradient(135deg, #d32f2f 0%, #f57c00 100%); color: white; border-bottom: 2px solid #555;">
                            <th style="padding: 16px; text-align: left; font-weight: 600;">ID</th>
                            <th style="padding: 16px; text-align: left; font-weight: 600;">Customer</th>
                            <th style="padding: 16px; text-align: left; font-weight: 600;">Table</th>
                            <th style="padding: 16px; text-align: left; font-weight: 600;">Items</th>
                            <th style="padding: 16px; text-align: left; font-weight: 600;">Booked On</th>
                            <th style="padding: 16px; text-align: left; font-weight: 600;">Deleted On</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var booking in Model)
                        {
                            <tr style="border-bottom: 1px solid #eee; background-color: #fafafa; opacity: 0.8; transition: background-color 0.3s ease;">
                                <td style="padding: 12px 16px; font-weight: 600; color: #d32f2f;">@booking.Id</td>
                                <td style="padding: 12px 16px;">@booking.CustomerName</td>
                                <td style="padding: 12px 16px;">
                                    <span style="background: #ffebee; color: #c62828; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;">
                                        Table @(booking.Table != null ? booking.Table.Number.ToString() : "-")
                                    </span>
                                </td>
                                <td style="padding: 12px 16px; white-space: normal;">
                                    @if (booking.BookingItems != null && booking.BookingItems.Count > 0)
                                    {
                                        <ul style="margin:0; padding-left:18px;">
                                            @foreach (var bi in booking.BookingItems)
                                            {
                                                <li style="color: black;">@(bi.MenuItem?.Name ?? "Unknown") (x@bi.Quantity)</li>
                                            }
                                        </ul>
                                    }
                                    else
                                    {
                                        <small>@(booking.MenuItem?.Name ?? "-")</small>
                                    }
                                </td>
                                <td style="padding: 12px 16px; color: #666; font-size: 13px;">@booking.CreatedAt.ToString("MMM dd, yyyy HH:mm")</td>
                                <td style="padding: 12px 16px; color: #d32f2f; font-size: 13px; font-weight: 600;">
                                    @(booking.DeletedAt?.ToString("MMM dd, yyyy HH:mm") ?? "-")
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        else
        {
            <div style="text-align: center; padding: 60px 20px; color: #999;">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" style="margin: 0 auto 20px; opacity: 0.5;">
                    <path d="M3 6H21M3 10H21M3 14H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <p style="font-size: 16px;">No archived bookings found</p>
            </div>
        }
    </div>
</div>

<style>
    tr:hover {
        background-color: #f0f0f0 !important;
    }
</style>
